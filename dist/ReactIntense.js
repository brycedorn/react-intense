"use strict";var _react=_interopRequireWildcard(require("react"));function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(b,c){if(!c&&b&&b.__esModule)return b;if(null===b||"object"!=_typeof(b)&&"function"!=typeof b)return{default:b};var d=_getRequireWildcardCache(c);if(d&&d.has(b))return d.get(b);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in b)if("default"!=a&&Object.prototype.hasOwnProperty.call(b,a)){var g=f?Object.getOwnPropertyDescriptor(b,a):null;g&&(g.get||g.set)?Object.defineProperty(e,a,g):e[a]=b[a]}return e["default"]=b,d&&d.set(b,e),e}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(b,c){var d=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=d){var g,h,j,k,l=[],a=!0,m=!1;try{if(j=(d=d.call(b)).next,0===c){if(Object(d)!==d)return;a=!1}else for(;!(a=(g=j.call(d)).done)&&(l.push(g.value),l.length!==c);a=!0);}catch(a){m=!0,h=a}finally{try{if(!a&&null!=d["return"]&&(k=d["return"](),Object(k)!==k))return}finally{if(m)throw h}}return l}}function _arrayWithHoles(a){if(Array.isArray(a))return a}var KEYCODE_ESC=27,MIN_DIST_THRESHOLD=1e-4,DEFAULT_MOVE_SPEED=.02,initialOverflowValue=document.body.style.overflow||"unset";function ReactIntense(a){function b(){var a=Math.abs;if(U.current&&K.current&&J.current){var b=K.current.x+(J.current.x-K.current.x)*w,d=K.current.y+(J.current.y-K.current.y)*w,e=a(b-K.current.x)+a(d-K.current.y);if(e>MIN_DIST_THRESHOLD){var f="",g=-1;if(x){if(d!==D){var h,i=c(d,window.innerHeight),j=window.innerHeight-(null===(h=U.current)||void 0===h?void 0:h.offsetHeight);f="translate3d(0px, ".concat(j*i,"px, 0px)"),g=d}}else if(b!==D){var k,l=c(b,window.innerWidth),m=window.innerWidth-(null===(k=U.current)||void 0===k?void 0:k.offsetWidth);f="translate3d(".concat(m*l,"px, 0px, 0px)"),g=b}O(f),E(g),K.current={x:b,y:d}}}}function c(a,b){return y?(b-a)/b:a/b}function d(){var a,b,c;null===(a=U.current)||void 0===a||a.addEventListener("mousemove",function(a){return m(a.clientX,a.clientY)}),null===(b=U.current)||void 0===b||b.addEventListener("touchmove",function(a){return n(a.touches[0])}),null===(c=U.current)||void 0===c||c.addEventListener("click",o),window.addEventListener("keyup",k),i()}function e(){var a,b,c;null===(a=U.current)||void 0===a||a.removeEventListener("mousemove",function(a){return m(a.clientX,a.clientY)}),null===(b=U.current)||void 0===b||b.removeEventListener("touchmove",function(a){return n(a.touches[0])}),null===(c=U.current)||void 0===c||c.removeEventListener("click",o),window.removeEventListener("keyup",k)}function f(){document.body.style.overflow="hidden"}function g(){document.body.style.overflow=initialOverflowValue}function h(){T.current&&window.cancelAnimationFrame(T.current),T.current=void 0,e(),g()}function i(){var a=window.requestAnimationFrame(i);T.current=a,b()}function j(a){a.preventDefault(),u&&u(a),S(!0),f()}function k(a){a.preventDefault(),a.keyCode===KEYCODE_ESC&&o()}function l(){I(!0),d()}function m(a,b){J.current={x:a,y:b}}function n(a){J.current={x:a.clientX,y:a.clientY}}function o(){S(!1),h()}var p=a.className,q=a.loader,r=a.src,s=a.thumbnailSrc,t=a.trigger,u=a.onClick,v=a.moveSpeed,w=void 0===v?DEFAULT_MOVE_SPEED:v,x=a.vertical,y=a.invert,z=a.caption,A=a.title,B=(0,_react.useState)(0),C=_slicedToArray(B,2),D=C[0],E=C[1],F=(0,_react.useState)(!1),G=_slicedToArray(F,2),H=G[0],I=G[1],J=(0,_react.useRef)({x:0,y:0}),K=(0,_react.useRef)({x:window.innerWidth/2,y:window.innerHeight/2}),L=(0,_react.useState)(""),M=_slicedToArray(L,2),N=M[0],O=M[1],P=(0,_react.useState)(!1),Q=_slicedToArray(P,2),R=Q[0],S=Q[1],T=(0,_react.useRef)(),U=(0,_react.useRef)(null);return _react["default"].createElement("div",{className:"ri-wrapper"},_react["default"].createElement(t||"div",{children:function(a){return R&&a?_react["default"].createElement("div",{className:"".concat(a," ri-loader")},_toConsumableArray(Array(8)).map(function(a,b){return _react["default"].createElement("div",{key:"".concat(b,"-outer")},_react["default"].createElement("div",{key:"".concat(b,"-inner")}))})):null}(q),className:"".concat(p," ri-trigger ").concat(R?" clicked":""),onClick:function(a){return j(a)},style:{backgroundImage:"url(".concat(s||r,")")}}),function(){var a={height:x?"":window.innerHeight,MozTransform:N,transform:N,WebkitTransform:N,width:x?window.innerWidth:""};return R?_react["default"].createElement("figure",{className:"ri-container",style:{opacity:H?1:0}},_react["default"].createElement("img",{ref:U,src:r,style:a,onLoad:l}),_react["default"].createElement("figcaption",{className:"ri-caption-container"},_react["default"].createElement("h1",{className:"ri-title"},A),_react["default"].createElement("h2",{className:"ri-caption"},z))):null}())}var _default=exports["default"]=ReactIntense;