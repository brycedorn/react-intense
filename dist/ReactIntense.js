"use strict";var _react=_interopRequireWildcard(require("react"));function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0,exports.useIntenseMaximize=useIntenseMaximize;function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(b,c){if(!c&&b&&b.__esModule)return b;if(null===b||"object"!=_typeof(b)&&"function"!=typeof b)return{default:b};var d=_getRequireWildcardCache(c);if(d&&d.has(b))return d.get(b);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in b)if("default"!=a&&Object.prototype.hasOwnProperty.call(b,a)){var g=f?Object.getOwnPropertyDescriptor(b,a):null;g&&(g.get||g.set)?Object.defineProperty(e,a,g):e[a]=b[a]}return e["default"]=b,d&&d.set(b,e),e}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(b,c){var d=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=d){var g,h,j,k,l=[],a=!0,m=!1;try{if(j=(d=d.call(b)).next,0===c){if(Object(d)!==d)return;a=!1}else for(;!(a=(g=j.call(d)).done)&&(l.push(g.value),l.length!==c);a=!0);}catch(a){m=!0,h=a}finally{try{if(!a&&null!=d["return"]&&(k=d["return"](),Object(k)!==k))return}finally{if(m)throw h}}return l}}function _arrayWithHoles(a){if(Array.isArray(a))return a}var KEYCODE_ESC=27,MIN_DIST_THRESHOLD=1e-4,DEFAULT_MOVE_SPEED=.02,initialOverflowValue=document.body.style.overflow||"unset";function useIntenseMaximize(a){function b(){var a=Math.abs;if(P.current){var b=F.current.x+(E.current.x-F.current.x)*r,d=F.current.y+(E.current.y-F.current.y)*r,e=a(b-F.current.x)+a(d-F.current.y);if(e>MIN_DIST_THRESHOLD){var f="",g=-1;if(s){if(d!==y){var h,i=c(d,window.innerHeight),j=window.innerHeight-(null===(h=P.current)||void 0===h?void 0:h.offsetHeight);f="translate3d(0px, ".concat(j*i,"px, 0px)"),g=d}}else if(b!==y){var k,l=c(b,window.innerWidth),m=window.innerWidth-(null===(k=P.current)||void 0===k?void 0:k.offsetWidth);f="translate3d(".concat(m*l,"px, 0px, 0px)"),g=b}J(f),z(g),F.current={x:b,y:d}}}}function c(a,b){return t?(b-a)/b:a/b}function d(){var a,b,c;null===(a=P.current)||void 0===a||a.addEventListener("mousemove",function(a){return l(a.clientX,a.clientY)}),null===(b=P.current)||void 0===b||b.addEventListener("touchmove",function(a){return m(a.touches[0])}),null===(c=P.current)||void 0===c||c.addEventListener("click",n),window.addEventListener("keyup",j),i()}function e(){var a,b,c;null===(a=P.current)||void 0===a||a.removeEventListener("mousemove",function(a){return l(a.clientX,a.clientY)}),null===(b=P.current)||void 0===b||b.removeEventListener("touchmove",function(a){return m(a.touches[0])}),null===(c=P.current)||void 0===c||c.removeEventListener("click",n),window.removeEventListener("keyup",j)}function f(){document.body.style.overflow="hidden"}function g(){document.body.style.overflow=initialOverflowValue}function h(){O.current&&window.cancelAnimationFrame(O.current),O.current=void 0,e(),g()}function i(){var a=window.requestAnimationFrame(i);O.current=a,b()}function j(a){a.preventDefault(),a.keyCode===KEYCODE_ESC&&n()}function k(){D(!0),d()}function l(a,b){E.current={x:a,y:b}}function m(a){E.current={x:a.clientX,y:a.clientY}}function n(){N(!1),h()}var o=a.src,p=a.onClick,q=a.moveSpeed,r=void 0===q?DEFAULT_MOVE_SPEED:q,s=a.vertical,t=a.invert,u=a.caption,v=a.title,w=(0,_react.useState)(0),x=_slicedToArray(w,2),y=x[0],z=x[1],A=(0,_react.useState)(!1),B=_slicedToArray(A,2),C=B[0],D=B[1],E=(0,_react.useRef)({x:0,y:0}),F=(0,_react.useRef)({x:window.innerWidth/2,y:window.innerHeight/2}),G=(0,_react.useState)(""),H=_slicedToArray(G,2),I=H[0],J=H[1],K=(0,_react.useState)(!1),L=_slicedToArray(K,2),M=L[0],N=L[1],O=(0,_react.useRef)(),P=(0,_react.useRef)(null);return{renderViewer:function(){var a={height:s?"":window.innerHeight,MozTransform:I,transform:I,WebkitTransform:I,width:s?window.innerWidth:""};return M?_react["default"].createElement("figure",{className:"ri-container",style:{opacity:C?1:0}},_react["default"].createElement("img",{ref:P,src:o,style:a,onLoad:k}),_react["default"].createElement("figcaption",{className:"ri-caption-container"},_react["default"].createElement("h1",{className:"ri-title"},v),_react["default"].createElement("h2",{className:"ri-caption"},u))):null},maximize:function(a){a.preventDefault(),p&&p(a),E.current={x:a.clientX,y:a.clientY},N(!0),f()},triggered:M,transform:I,loaded:C,onLoad:k,imgRef:P}}function ReactIntense(a){var b=a.className,c=a.renderLoader,d=void 0===c?function(){return _react["default"].createElement("div",{className:"ri-loader"})}:c,e=a.src,f=a.thumbnailSrc,g=a.vertical,h=a.caption,i=a.title,j=useIntenseMaximize(a),k=j.triggered,l=j.transform,m=j.loaded,n=j.onLoad,o=j.maximize,p=j.imgRef;return _react["default"].createElement("div",{className:"ri-wrapper"},_react["default"].createElement("div",{className:"".concat(b," ri-trigger ").concat(k?" ri-clicked":""),onClick:o,style:{backgroundImage:"url(".concat(f||e,")")}},k?d():null),function(){var a={height:g?"":window.innerHeight,MozTransform:l,transform:l,WebkitTransform:l,width:g?window.innerWidth:""};return k?_react["default"].createElement("figure",{className:"ri-container",style:{opacity:m?1:0}},_react["default"].createElement("img",{ref:p,src:e,style:a,onLoad:n}),_react["default"].createElement("figcaption",{className:"ri-caption-container"},_react["default"].createElement("h1",{className:"ri-title"},i),_react["default"].createElement("h2",{className:"ri-caption"},h))):null}())}var _default=exports["default"]=ReactIntense;